import {GoogleGenerativeAI,} from "@google/generative-ai";
 
  
  const apiKey = "AIzaSyBQeP6afSbXoX_srgUAwNs95ndAEcEcmpM";
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.5-pro-preview-03-25",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 64,
    maxOutputTokens: 65536,
    responseModalities: [
    ],
    responseMimeType: "application/json",
  };
  

  export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate professional resume content based only on the following information. Structure it logically with standard resume sections (like Summary/Objective, Education, Skills, Projects, Certifications, Achievements). The output should be text suitable for copying into a word processor or resume builder for final formatting and saving as a PDF.\nPersonal Details:\nName: Hitesh\nEmail: joshihitesh29@gmail.com\nPhone: 9650122063\n\nTechnical Skills:\nProgramming Languages: C, C++, Java, JavaScript, HTML/CSS, TypeScript (basic)\nFrameworks & Libraries: React.js, Axios, Material-UI, Tailwind CSS, ShadCN, Bootstrap\nDatabases: SQL, MySQL, PostgreSQL\nCloud Platforms: AWS, Azure\nTools & Technologies: Git, GitHub\nSoft Skills: Leadership, Analytical Thinking, Problem-Solving, Teamwork, Strong Communication Skills.\nUniversity: Vellore Institute of Technology\nDegree: Master of Computer Applications (MCA)\nExpected Graduation Year: 2026\n\nProjects:\nProject Title:AI-Powered Code-Generating Platform\nStack:  Node.js, Express.js, MongoDB, React.js, Tailwind CSS\nDescription:  Developed a platform with multiple micro-apps to generate code in different technologies using AI.- Integrated features such as dark mode/light mode and preview options for HTML, React, and JavaScript code.- Implemented user authentication and created a scalable backend using Node.js, Express.js, and MongoDB.- Future enhancements planned include multi-language support and additional AI-driven too\n\nCertifications:\nCertification 1: AWS Certified Cloud Practitioner\nCertification 2: Microsoft Certified: Azure Fundamentals\nAchievements:- Solved 400+ data structures and algorithm problems on platforms like GeeksforGeeks and LeetCode, improving\n problem solving skills.- Actively participated in 5+ college and university-level sports events, showcasing leadership skills and teamwork in\n competitive environments"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Here's a breakdown of the thinking process to generate the resume content:\n\n1.  **Understand the Goal:** The request is to create professional resume content based *only* on the provided information. It needs to be structured logically with standard sections and formatted as plain text suitable for copy-pasting.\n\n2.  **Identify Key Information Categories:** Scan the input and categorize each piece of information:\n    *   **Personal Details:** Name, Email, Phone. (This goes at the top).\n    *   **Education:** University, Degree, Expected Graduation Year. (This forms the Education section).\n    *   **Technical Skills:** Programming Languages, Frameworks/Libraries, Databases, Cloud Platforms, Tools. (This forms the Skills section, possibly subdivided).\n    *   **Soft Skills:** Leadership, Analytical Thinking, Problem-Solving, Teamwork, Communication. (These can be mentioned in a Summary/Objective or integrated into project/achievement descriptions, but a separate Soft Skills section is less common on modern tech resumes unless specifically requested or for certain roles. Let's put them in the main Skills section for now, clearly marked).\n    *   **Projects:** Title, Stack, Description, Future Enhancements. (This forms the Projects section).\n    *   **Certifications:** AWS, Azure. (This forms the Certifications section).\n    *   **Achievements:** DSA problem-solving, Sports participation. (This forms the Achievements section).\n\n3.  **Choose a Resume Structure:** Standard structures include:\n    *   Contact Information\n    *   Summary/Objective (Optional but recommended for entry-level/students)\n    *   Education\n    *   Skills\n    *   Projects\n    *   Experience (Not provided, so omit)\n    *   Certifications\n    *   Achievements\n\n4.  **Draft the Contact Information Section:** Straightforward copy-paste.\n    *   Hitesh\n    *   joshihitesh29@gmail.com\n    *   9650122063\n    *   *(Self-correction: Add placeholder for LinkedIn/Portfolio if desired, though not provided)*\n\n5.  **Draft the Summary/Objective Section:** Since this is a student profile aiming for entry-level roles or internships, an Objective or Summary is beneficial.\n    *   **Objective Focus:** State the goal (e.g., internship, entry-level role) and highlight key skills/interests relevant to the target roles (Software Development, Web Development, Cloud).\n    *   **Summary Focus:** Briefly summarize key qualifications (MCA student, skills in web dev/cloud, project experience, problem-solving).\n    *   *Decision:* A Summary is often stronger. Let's craft one highlighting the MCA degree, key tech skills (React, Node, Cloud), project experience, and core soft skills.\n    *   *Draft:* \"Highly motivated Master of Computer Applications student at Vellore Institute of Technology (expected 2026) with a strong foundation in full-stack web development (React.js, Node.js, SQL/NoSQL databases) and cloud platforms (AWS, Azure). Proven ability to develop functional applications, demonstrated through the AI-Powered Code-Generating Platform project. Possesses strong analytical, problem-solving, and teamwork skills, honed through academic coursework, project work, and extensive competitive programming practice. Seeking challenging internship or entry-level opportunities in software development.\"\n\n6.  **Draft the Education Section:** Format consistently.\n    *   **Vellore Institute of Technology**\n    *   Master of Computer Applications (MCA)\n    *   Expected Graduation: May 2026 (Using \"May\" is a common convention, or just the year is fine too)\n\n7.  **Draft the Skills Section:** Organize the provided technical skills logically. Subsections make it easier to read.\n    *   **Programming Languages:** C, C++, Java, JavaScript, HTML/CSS, TypeScript (basic)\n    *   **Frameworks & Libraries:** React.js, Node.js, Express.js, Axios, Material-UI, Tailwind CSS, ShadCN, Bootstrap *(Self-correction: Added Node.js and Express.js from the project stack, as they are fundamental frameworks/libraries)*\n    *   **Databases:** SQL, MySQL, PostgreSQL, MongoDB *(Self-correction: Added MongoDB from the project stack)*\n    *   **Cloud Platforms:** AWS, Azure\n    *   **Tools & Technologies:** Git, GitHub\n    *   **Soft Skills:** Leadership, Analytical Thinking, Problem-Solving, Teamwork, Strong Communication Skills *(Consider removing this subsection and weaving skills into descriptions if space is tight or for a more modern look, but keep it for now as requested)*\n\n8.  **Draft the Projects Section:** This is crucial. Use action verbs and quantify results where possible (though quantification isn't directly available here). Focus on *what* was done and *how* (using which technologies).\n    *   **AI-Powered Code-Generating Platform**\n    *   *Technologies Used:* Node.js, Express.js, MongoDB, React.js, Tailwind CSS\n    *   *Description Bullets:*\n        *   Developed a full-stack platform featuring multiple micro-applications for AI-driven code generation across various technologies.\n        *   Implemented front-end features including light/dark mode toggles and real-time code preview options for HTML, React, and JavaScript using React.js and Tailwind CSS.\n        *   Engineered a scalable backend architecture with user authentication mechanisms using Node.js, Express.js, and MongoDB.\n        *   *(Optional but good: Briefly mention future plans)* Planned future enhancements include multi-language support and additional AI capabilities.\n\n9.  **Draft the Certifications Section:** List them clearly.\n    *   AWS Certified Cloud Practitioner\n    *   Microsoft Certified: Azure Fundamentals\n\n10. **Draft the Achievements Section:** Frame achievements concisely, highlighting the skill demonstrated.\n    *   Demonstrated strong problem-solving and algorithmic skills by solving over 400 Data Structures and Algorithms problems on competitive programming platforms (GeeksforGeeks, LeetCode).\n    *   Developed leadership and teamwork abilities through active participation in 5+ college and university-level sports events.\n\n11. **Review and Refine:**\n    *   **Consistency:** Ensure consistent formatting (e.g., capitalization, bullet points).\n    *   **Clarity:** Is the language clear and concise? Use action verbs.\n    *   **Completeness:** Does it include *only* the provided information? Yes.\n    *   **Structure:** Is the flow logical? Yes.\n    *   **Keywords:** Does it contain relevant keywords for potential roles (React, Node, AWS, Azure, Full-Stack, etc.)? Yes.\n    *   **Target Audience:** Is it suitable for recruiters looking for interns or entry-level developers? Yes.\n    *   *Self-correction:* Ensure technologies mentioned in the project description (Node.js, Express.js, MongoDB) are also listed in the Skills section. (Done in Step 7). Make sure graduation year is clearly marked as \"Expected\". (Done in Step 6). Add a note about adding LinkedIn/Portfolio URLs.\n\n12. **Final Output Generation:** Assemble the drafted sections into the final plain text format suitable for copy-pasting."},
            {text: "Okay, here is the professional resume content generated solely from the information you provided. You can copy and paste this text into a document or resume builder for formatting.\n\n---\n\n**Hitesh**\njoshihitesh29@gmail.com | 9650122063\n*(Optional: Consider adding links to your LinkedIn profile or GitHub/Portfolio here)*\n\n**Summary**\n\nHighly motivated Master of Computer Applications student at Vellore Institute of Technology (expected 2026) with a strong foundation in full-stack web development, including React.js, Node.js, and SQL/NoSQL databases, complemented by certifications in AWS and Azure cloud platforms. Proven ability to design and implement functional applications, demonstrated through the development of an AI-Powered Code-Generating Platform. Possesses strong analytical, problem-solving, and teamwork skills, honed through extensive competitive programming practice and active participation in team events. Eager to contribute technical skills and enthusiasm to a challenging internship or entry-level software development role.\n\n**Education**\n\n**Vellore Institute of Technology** - Vellore, India\nMaster of Computer Applications (MCA)\n*Expected Graduation: 2026*\n\n**Skills**\n\n*   **Programming Languages:** C, C++, Java, JavaScript, HTML/CSS, TypeScript (basic)\n*   **Frameworks & Libraries:** React.js, Node.js, Express.js, Axios, Material-UI, Tailwind CSS, ShadCN, Bootstrap\n*   **Databases:** SQL, MySQL, PostgreSQL, MongoDB\n*   **Cloud Platforms:** AWS, Azure\n*   **Tools & Technologies:** Git, GitHub\n*   **Soft Skills:** Leadership, Analytical Thinking, Problem-Solving, Teamwork, Strong Communication Skills\n\n**Projects**\n\n**AI-Powered Code-Generating Platform**\n*   *Technologies Used: Node.js, Express.js, MongoDB, React.js, Tailwind CSS*\n*   Developed a full-stack web application featuring multiple micro-apps designed to generate code in various technologies using AI integration.\n*   Implemented key front-end features such as dark/light mode toggles and real-time preview options for HTML, React, and JavaScript code snippets.\n*   Engineered a scalable backend infrastructure, including user authentication, utilizing Node.js, Express.js, and MongoDB.\n*   Planned future enhancements include multi-language support and the integration of additional AI-driven development tools.\n\n**Certifications**\n\n*   AWS Certified Cloud Practitioner\n*   Microsoft Certified: Azure Fundamentals\n\n**Achievements**\n\n*   Demonstrated strong analytical and problem-solving capabilities by successfully solving over 400 Data Structures and Algorithm problems on platforms including GeeksforGeeks and LeetCode.\n*   Developed leadership and teamwork skills through active participation and contribution in 5+ competitive college and university-level sports events.\n\n---"},
          ],
        },
      ],
    });
  
    const result = await chatSession.sendMessage("INSERT_INPUT_HERE");
    // TODO: Following code needs to be updated for client-side apps.
    const candidates = result.response.candidates;
    for(let candidate_index = 0; candidate_index < candidates.length; candidate_index++) {
      for(let part_index = 0; part_index < candidates[candidate_index].content.parts.length; part_index++) {
        const part = candidates[candidate_index].content.parts[part_index];
        if(part.inlineData) {
          try {
            const filename = `output_${candidate_index}_${part_index}.${mime.extension(part.inlineData.mimeType)}`;
            fs.writeFileSync(filename, Buffer.from(part.inlineData.data, 'base64'));
            console.log(`Output written to: ${filename}`);
          } catch (err) {
            console.error(err);
          }
        }
      }
    }
  
  
